{"version":3,"sources":["../src/ensure-ready.js"],"names":["ensureReady","routes","pathname","Promise","all","map","route","match","window","location","component","load","undefined","document","data","eval","getElementById","textContent","resolve","console","error"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;;;SAIsBA,W;;;;;;;+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4BC,YAAAA,MAA5B,2DAAqC,EAArC;AAAyCC,YAAAA,QAAzC;AAAA;AAAA;AAAA,mBAEGC,OAAO,CAACC,GAAR,CACJH,MAAM,CAACI,GAAP,CAAY,UAAAC,KAAK,EAAI;AACnB,kBAAMC,KAAK,GAAG,+BAAWL,QAAQ,IAAIM,MAAM,CAACC,QAAP,CAAgBP,QAAvC,EAAiDI,KAAjD,CAAd;;AACA,kBAAIC,KAAK,IAAID,KAAT,IAAkBA,KAAK,CAACI,SAAxB,IAAqCJ,KAAK,CAACI,SAAN,CAAgBC,IAAzD,EAA+D;AAC7D,uBAAOL,KAAK,CAACI,SAAN,CAAgBC,IAAhB,EAAP;AACD;;AACD,qBAAOC,SAAP;AACD,aAND,CADI,CAFH;;AAAA;AAaH,gBAAI,QAAOJ,MAAP,0DAAOA,MAAP,OAAkBI,SAAlB,IAA+B,CAAC,CAACC,QAArC,EAA+C;AAC7C;AACAC,cAAAA,IAAI,GAAGC,IAAI,YACLF,QAAQ,CAACG,cAAT,CAAyB,kBAAzB,EAA6CC,WADxC,OAAX;AAGD;;AAlBE,6CAmBId,OAAO,CAACe,OAAR,CAAiBJ,IAAjB,CAnBJ;;AAAA;AAAA;AAAA;AAqBHK,YAAAA,OAAO,CAACC,KAAR;;AArBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import {matchPath} from 'react-router-dom';\nimport * as utils from './utils';\n\n/**\n * This help us to get initial app state data,\n * and ensure async page component is loaded before rendering\n */\nexport async function ensureReady (routes = [], pathname) {\n  try {\n    await Promise.all (\n      routes.map (route => {\n        const match = matchPath (pathname || window.location.pathname, route);\n        if (match && route && route.component && route.component.load) {\n          return route.component.load ();\n        }\n        return undefined;\n      })\n    );\n\n    let data;\n    if (typeof window !== undefined && !!document) {\n      // deserialize state from 'serialize-javascript' format\n      data = eval (\n        `(${document.getElementById ('server-app-state').textContent})`\n      );\n    }\n    return Promise.resolve (data);\n  } catch (e) {\n    console.error (e);\n  }\n}\n"],"file":"ensure-ready.js"}