{"version":3,"sources":["../src/load-initial-props.js"],"names":["loadInitialProps","routes","path","ctx","initialPropsPromises","isMatchedComponent","find","route","match","component","getInitialProps","push","load","then","Promise","all","initialProps"],"mappings":";;;;;;;;;;;;;;;AAAA;;AAEA;;;;;;SAMsBA,gB;;;;;;;4BAAf,iBAAgCC,MAAhC,EAAwCC,IAAxC,EAA8CC,GAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,YAAAA,oBADD,GACwB,EADxB;AAGCC,YAAAA,kBAHD,GAGsBJ,MAAM,CAACK,IAAP,CAAY,UAAAC,KAAK,EAAI;AAC9C,kBAAMC,KAAK,GAAG,+BAAUN,IAAV,EAAgBK,KAAhB,CAAd,CAD8C,CAE9C;;AACA,kBAAIC,KAAK,IAAID,KAAK,CAACE,SAAf,IAA4BF,KAAK,CAACE,SAAN,CAAgBC,eAAhD,EAAiE;AAC/D,oBAAMD,SAAS,GAAGF,KAAK,CAACE,SAAxB;AACAL,gBAAAA,oBAAoB,CAACO,IAArB,CACEF,SAAS,CAACG,IAAV,GACIH,SAAS,CACNG,IADH,GAEGC,IAFH,CAEQ;AAAA,yBAAMJ,SAAS,CAACC,eAAV;AAA4BF,oBAAAA,KAAK,EAALA;AAA5B,qBAAsCL,GAAtC,EAAN;AAAA,iBAFR,CADJ,GAIIM,SAAS,CAACC,eAAV;AAA4BF,kBAAAA,KAAK,EAALA;AAA5B,mBAAsCL,GAAtC,EALN;AAOD;;AAED,qBAAO,CAAC,CAACK,KAAT;AACD,aAf0B,CAHtB;AAAA,0BAqBIH,kBArBJ;AAAA;AAAA,mBAsBkBS,OAAO,CAACC,GAAR,CAAYX,oBAAZ,CAtBlB;;AAAA;AAAA,wCAsBqD,CAtBrD;AAAA;AAqBHI,cAAAA,KArBG;AAsBHQ,cAAAA,YAtBG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { matchPath } from \"react-router-dom\";\r\n\r\n/**\r\n * load page init props\r\n * @param {*} routes routes config\r\n * @param {*} path req path\r\n * @param {*} ctx the context passing to page getInitialProps function as param\r\n */\r\nexport async function loadInitialProps(routes, path, ctx) {\r\n  const initialPropsPromises = [];\r\n\r\n  const isMatchedComponent = routes.find(route => {\r\n    const match = matchPath(path, route);\r\n    //if matched, judge compoent and getInitialProps is existed\r\n    if (match && route.component && route.component.getInitialProps) {\r\n      const component = route.component;\r\n      initialPropsPromises.push(\r\n        component.load\r\n          ? component\r\n              .load()\r\n              .then(() => component.getInitialProps({ match, ...ctx }))\r\n          : component.getInitialProps({ match, ...ctx })\r\n      );\r\n    }\r\n\r\n    return !!match;\r\n  });\r\n\r\n  return {\r\n    match: isMatchedComponent,\r\n    initialProps: (await Promise.all(initialPropsPromises))[0]\r\n  };\r\n}\r\n"],"file":"load-initial-props.js"}