{"version":3,"sources":["../src/default-document.js"],"names":["DefaultDocument","props","helmet","assets","dynamicBundles","initialProps","htmlAttrs","htmlAttributes","toComponent","bodyAttrs","bodyAttributes","styles","filter","bundle","file","endsWith","scripts","title","meta","link","client","css","map","style","js","script","dynamicAssets","renderPage","page","dynamicModules","PureComponent","NutRoot","NutData","__html"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react';\nimport serialize from 'serialize-javascript';\nimport {getBundles} from '../webpack';\n\n/**\n * default document component\n * used to create init page template\n */\nexport class DefaultDocument extends PureComponent {\n  static async getInitialProps({\n    assets,\n    dynamicAssets,\n    initialProps,\n    renderPage,\n  }) {\n    const page = await renderPage ();\n    const dynamicBundles = getBundles (\n      dynamicAssets,\n      page.dynamicModules || []\n    );\n    return {assets, dynamicAssets, initialProps, dynamicBundles, ...page};\n  }\n\n  render () {\n    const {helmet, assets, dynamicBundles, initialProps} = this.props;\n    // get attributes from React Helmet\n    const htmlAttrs = helmet.htmlAttributes.toComponent ();\n    const bodyAttrs = helmet.bodyAttributes.toComponent ();\n\n    let styles = dynamicBundles.filter (bundle =>\n      bundle.file.endsWith ('.css')\n    );\n    let scripts = dynamicBundles.filter (bundle =>\n      bundle.file.endsWith ('.js')\n    );\n    return (\n      <html {...htmlAttrs}>\n        <head>\n          <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <meta charSet=\"utf-8\" />\n          <title>Welcome to Nut</title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          {helmet.title.toComponent ()}\n          {helmet.meta.toComponent ()}\n          {helmet.link.toComponent ()}\n          {assets.client.css &&\n            <link rel=\"stylesheet\" href={assets.client.css} />}\n          {styles.map (style => (\n            <link href={style.file} rel=\"stylesheet\" />\n          ))}\n        </head>\n        <body {...bodyAttrs}>\n          <NutRoot />\n          <NutData initialProps={initialProps} />\n          <script\n            type=\"text/javascript\"\n            src={assets.client.js}\n            defer\n            crossOrigin=\"anonymous\"\n          />\n          {scripts.map (script => <script src={script.file} />)}\n          {helmet.script.toComponent ()}\n        </body>\n      </html>\n    );\n  }\n}\n\nexport function NutRoot () {\n  return <div id=\"root\">DO_NOT_DELETE_THIS_YOU_WILL_BREAK_YOUR_APP</div>;\n}\n\nexport function NutData({initialProps}) {\n  return (\n    <script\n      id=\"server-app-state\"\n      type=\"application/json\"\n      dangerouslySetInnerHTML={{\n        __html: serialize ({...initialProps}),\n      }}\n    />\n  );\n}\n"],"file":"default-document.js"}